---
/**
 * Button
 * ------------
 * Description: Buttons are interactive elements activated by a user with mouse, keyboard, or tap
 * Properties:
 * - type: 'link' | 'button' | 'submit' | 'reset' â€” if 'link', renders an <a> tag
 * - size: 'lg' | 'base' | 'sm'
 * - link: string (href for links)
 * - modal: string (optional, modal id to trigger)
 * - style: 'primary' | 'secondary' | 'neutral' | 'white'
 * - variation: 'outline' | 'link'
 * - elevated: boolean (optional, adds shadow)
 * - classes: string (additional CSS classes)
 */

type Props = {
  type?: 'link' | 'button' | 'submit' | 'reset'
  size?: 'lg' | 'base' | 'sm'
  link?: string
  modal?: string
  style?: 'primary' | 'secondary' | 'neutral' | 'white'
  variation?: 'outline' | 'link'
  elevated?: boolean
  classes?: string
}

const {
  type = 'button',
  size = 'base',
  link,
  modal,
  style = 'primary',
  variation,
  elevated = false,
  classes = '',
} = Astro.props as Props

// Determine if it's a link element (render <a>)
const isLink = type === 'link' || (type === 'button' && !!link)
---

{isLink ? (
  <a
    href={link}
    target={link?.startsWith('http') ? '_blank' : '_self'}
    rel={link?.startsWith('http') ? 'noopener noreferrer' : undefined}
    class:list={[
      'button',
      size && `button--${size}`,
      style && `button--${style}`,
      variation && `button--${variation}`,
      elevated && 'button--elevated',
      classes,
    ]}
    aria-modal={modal ? 'true' : undefined}
    data-modal={modal ?? undefined}
  >
    <slot />
  </a>
) : (
  <button
    type={type}
    class:list={[
      'button',
      size && `button--${size}`,
      style && `button--${style}`,
      variation && `button--${variation}`,
      elevated && 'button--elevated',
      classes,
    ]}
    aria-modal={modal ? 'true' : undefined}
    data-modal={modal ?? undefined}
  >
    <slot />
  </button>
)}

<style lang="postcss" is:global>
  .button {
    @apply inline-flex cursor-pointer items-center justify-center gap-2 whitespace-nowrap rounded font-bold tracking-wide transition duration-300 focus-visible:outline-none disabled:cursor-not-allowed disabled:shadow-none;
  }

  .button--lg {
    @apply h-12 px-6 text-sm;
  }
  .button--base {
    @apply h-10 px-5 text-sm;
  }
  .button--sm {
    @apply h-8 px-4 text-xs;
  }

  .button--elevated.button--lg {
    @apply shadow-lg hover:shadow-md focus:shadow-md;
  }
  .button--elevated.button--base,
  .button--elevated.button--sm {
    @apply shadow-md hover:shadow-sm focus:shadow-sm;
  }

  .button--outline {
    @apply border;
  }

  .button--link {
    @apply inline-flex items-center justify-start gap-2 px-0 font-normal bg-transparent;
  }

  .button--primary {
    @apply bg-primary-500 text-white hover:bg-primary-700 focus:bg-primary-700 disabled:border-primary-300 disabled:bg-primary-300;
  }
  .button--primary.button--elevated {
    @apply shadow-lg shadow-primary-500/30 hover:shadow-primary-500/30 focus:shadow-primary-500/30;
  }
  .button--primary.button--link {
    @apply bg-transparent text-primary-500 hover:text-primary-600 focus:text-primary-600;
  }
  .button--primary.button--outline {
    @apply border-primary-500 bg-transparent text-primary-500 hover:border-primary-600 hover:text-primary-600;
  }

  .button--secondary {
    @apply bg-primary-50 text-primary-500 hover:bg-primary-100 hover:text-primary-600 focus:bg-primary-200 focus:text-primary-700 disabled:border-primary-300 disabled:bg-primary-100 disabled:text-primary-400;
  }
  .button--secondary.button--elevated {
    @apply shadow-primary-500/30 hover:shadow-primary-500/30 focus:shadow-primary-500/30;
  }
  .button--secondary.button--link {
    @apply bg-transparent text-primary-500 hover:text-primary-600 focus:text-primary-600;
  }
  .button--secondary.button--outline {
    @apply border-primary-500 bg-transparent text-primary-500 hover:border-primary-600 hover:text-primary-600;
  }

  .button--neutral {
    @apply bg-neutral-700 text-white hover:bg-neutral-800 focus:bg-neutral-900 disabled:border-neutral-300 disabled:bg-neutral-300;
  }
  .button--neutral.button--elevated {
    @apply shadow-neutral-500/30 hover:shadow-neutral-500/30 focus:shadow-neutral-500/30;
  }
  .button--neutral.button--link {
    @apply bg-transparent text-neutral-700 hover:text-neutral-800 focus:text-neutral-900;
  }
  .button--neutral.button--outline {
    @apply border-neutral-700 bg-transparent text-neutral-700 hover:border-neutral-800 hover:text-neutral-800;
  }

  .button--white {
    @apply bg-white text-white disabled:border-neutral-300 disabled:bg-neutral-300;
  }
  .button--white.button--elevated {
    @apply shadow-neutral-500/30 hover:shadow-neutral-500/30 focus:shadow-neutral-500/30;
  }
  .button--white.button--link {
    @apply bg-transparent text-white;
  }
  .button--white.button--outline {
    @apply border-white bg-transparent text-white;
  }
</style>